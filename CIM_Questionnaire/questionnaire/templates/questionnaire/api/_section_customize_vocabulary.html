{% extends "questionnaire/api/_section.html" %}

{% load questionnaire_filters %}

{% block content %}

    {% with section_parameters.version as version %}
    {% with section_parameters.model_proxy as model_proxy %}
    {% with section_parameters.vocabulary as vocabulary %}

        {% with vocabulary_key=vocabulary.get_key %}

            <div id="tab_scientific_properties_{{ vocabulary_key }} data-section-key="{{ version.key }}|{{ model_proxy.name.lower }}|{{ vocabulary_key }}">
                <div class="tab_content">

                    <div class="vocabulary_tabs"> <!-- (vocabulary_tabs is distinguished from the top-level "vocabularies_tabs") -->

                        <div class="tabs"> <!-- inner tab for vocabulary components -->
                            <ul>
                                {% for component in vocabulary.component_proxies.all %}
                                    {% with component_key=component.get_key %}
                                        <li> <!-- inner tab menu -->
                                            <a href="#tab_scientific_properties_{{ vocabulary_key }}_{{ component_key }}">
                                                {{ component }} <span style="font-size: small;">({{ component.scientific_properties.count }})</span>
                                            </a>
                                        </li>
                                    {% endwith %} {# /component_key #}
                                {% endfor %} {# /component #}
                            </ul>
                            {% for component in vocabulary.component_proxies.all %}
                                {% with component_key=component.get_key %}
                                    <div id="tab_scientific_properties_{{ vocabulary_key }}_{{ component_key }}" data-section-key="{{ version.key }}|{{ model_proxy.name.lower }}|{{ vocabulary_key }}|{{ component_key }}">
                                        <div class="tab_content"> <!-- inner tab content -->
                                            <div class="documentation unloaded">
                                                This section has not yet been loaded.
                                            </div>
                                        </div>
                                    </div> <!-- /#tab_scientific_properties_{{ vocabulary_key }}_{{ component_key }} -->
                                {% endwith %} {# /component_key #}
                            {% endfor %} {# /component #}
                        </div> <!-- /.tabs -->

                    </div> <!-- /.vocabulary_tabs -->

                </div> <!-- /.tab_content -->
            </div> <!-- /#tab_scientific_properties_{{ vocabulary_key }} -->

        {% endwith %} {# /vocabulary_key #}

    {% endwith %} {# /vocabulary #}
    {% endwith %} {# /model_proxy #}
    {% endwith %} {# /version #}

{% endblock %} {# /content #}