{% load serialization_filters %}

{#  property = the scientific property #}

<componentProperty represented="true">

    <shortName>{{ property.proxy.name }}</shortName>
    <longName>{{ property.proxy.name }}</longName>

    {# TODO: ADD EXTRA PROPERTIES (DESCRIPTION, UNITS, STANDARD_NAME #}

    {% if property.is_enumeration %}

        <value>
            {% for value in property.get_value %}
                <!-- separating values by "|" rather than in explicit tags -->
                <!-- <value>{{ value }}</value> -->
                {{ value }} {% if not forloop.last %} | {% endif %}
            {% endfor %}
        </value>

    {% else %}

        <value>
            {{ property.get_value.strip }}
        </value>

    {% endif %} {# /is_enumeration #}

    {% with vocabulary=property|get_vocabulary_from_property %}
        <extension>
            <vocabulary {% if vocabulary.url %} href="{{ vocabulary.url }}" {% endif %}>
                <name>{{ vocabulary.name }}</name>
                <version>{{ vocabulary.version }}</version>
            </vocabulary>
        </extension>
    {% endwith %} {# /vocabulary #}

</componentProperty>
